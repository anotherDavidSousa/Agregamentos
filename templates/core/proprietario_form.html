{% extends 'base.html' %}

{% block title %}{% if form_type == 'create' %}Novo Proprietário{% else %}Editar Proprietário{% endif %}{% endblock %}

{% block content %}
<h2>{% if form_type == 'create' %}Novo Proprietário{% else %}Editar Proprietário{% endif %}</h2>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="form-group">
        <label for="codigo">Código</label>
        <input type="text" id="codigo" name="codigo" 
               value="{% if proprietario %}{{ proprietario.codigo }}{% endif %}"
               placeholder="Código único do proprietário">
    </div>
    
    <div class="form-group">
        <label for="nome_razao_social">Nome/Razão Social</label>
        <input type="text" id="nome_razao_social" name="nome_razao_social" 
               value="{% if proprietario %}{{ proprietario.nome_razao_social }}{% endif %}">
    </div>
    
    <div class="form-group">
        <label for="tipo">Tipo</label>
        <select id="tipo" name="tipo">
            <option value="">Selecione...</option>
            <option value="PF" {% if proprietario and proprietario.tipo == 'PF' %}selected{% endif %}>Pessoa Física</option>
            <option value="PJ" {% if proprietario and proprietario.tipo == 'PJ' %}selected{% endif %}>Pessoa Jurídica</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="status">Status</label>
        <select id="status" name="status">
            <option value="sim" {% if not proprietario or proprietario.status == 'sim' %}selected{% endif %}>Sim</option>
            <option value="nao" {% if proprietario and proprietario.status == 'nao' %}selected{% endif %}>Não</option>
        </select>
        <small class="form-text text-muted">O status será atualizado automaticamente baseado nos cavalos com carreta acoplada.</small>
    </div>
    
    <div class="form-group">
        <label for="whatsapp">WhatsApp</label>
        <input type="text" id="whatsapp" name="whatsapp" 
               placeholder="(11) 99999-9999"
               value="{% if proprietario %}{{ proprietario.whatsapp }}{% endif %}">
        <small class="form-text text-muted">Formato: (11) 99999-9999</small>
    </div>
    
    <div class="form-group">
        <label for="documento">Documento</label>
        <input type="file" id="documento" name="documento">
        {% if proprietario and proprietario.documento %}
            <p style="margin-top: 0.5rem; color: #7f8c8d;">Documento atual: 
                <a href="{{ proprietario.documento.url }}" target="_blank">Ver</a>
            </p>
        {% endif %}
    </div>
    
    <div class="form-group">
        <label for="observacoes">Observações</label>
        <textarea id="observacoes" name="observacoes">{% if proprietario %}{{ proprietario.observacoes }}{% endif %}</textarea>
    </div>
    
    <div class="actions">
        <button type="submit" class="btn btn-success">Salvar</button>
        <a href="{% if proprietario %}{% url 'proprietario_detail' proprietario.pk %}{% else %}{% url 'proprietario_list' %}{% endif %}" 
           class="btn btn-secondary">Cancelar</a>
    </div>
</form>
{% endblock %}

